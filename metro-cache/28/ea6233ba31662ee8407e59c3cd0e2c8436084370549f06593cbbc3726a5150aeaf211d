{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/interopRequireWildcard","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@unimodules/core","data":{"isAsync":false}},{"name":"blueimp-md5","data":{"isAsync":false}},{"name":"expo-constants","data":{"isAsync":false}},{"name":"expo-file-system","data":{"isAsync":false}},{"name":"./AssetUris","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  var _interopRequireWildcard = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireWildcard\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getLocalAssets = getLocalAssets;\n  exports.getManifest = getManifest;\n  exports.downloadAsync = downloadAsync;\n  exports.manifestBaseUrl = exports.IS_BARE_ENV_WITHOUT_UPDATES = exports.IS_ENV_WITH_UPDATES_ENABLED = exports.IS_BARE_ENV_WITH_UPDATES = exports.IS_MANAGED_ENV = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/regenerator\"));\n\n  var _core = _$$_REQUIRE(_dependencyMap[3], \"@unimodules/core\");\n\n  var _blueimpMd = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"blueimp-md5\"));\n\n  var _expoConstants = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"expo-constants\"));\n\n  var FileSystem = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[6], \"expo-file-system\"));\n\n  var _AssetUris = _$$_REQUIRE(_dependencyMap[7], \"./AssetUris\");\n\n  var _NativeModulesProxy$E, _NativeModulesProxy$E2;\n\n  var IS_MANAGED_ENV = !!_expoConstants.default.appOwnership;\n  exports.IS_MANAGED_ENV = IS_MANAGED_ENV;\n  var IS_BARE_ENV_WITH_UPDATES = !IS_MANAGED_ENV && !!((_NativeModulesProxy$E = _core.NativeModulesProxy.ExpoUpdates) == null ? void 0 : _NativeModulesProxy$E.isEnabled) && !((_NativeModulesProxy$E2 = _core.NativeModulesProxy.ExpoUpdates) == null ? void 0 : _NativeModulesProxy$E2.isUsingEmbeddedAssets);\n  exports.IS_BARE_ENV_WITH_UPDATES = IS_BARE_ENV_WITH_UPDATES;\n  var IS_ENV_WITH_UPDATES_ENABLED = IS_MANAGED_ENV || IS_BARE_ENV_WITH_UPDATES;\n  exports.IS_ENV_WITH_UPDATES_ENABLED = IS_ENV_WITH_UPDATES_ENABLED;\n  var IS_BARE_ENV_WITHOUT_UPDATES = !IS_MANAGED_ENV && !IS_BARE_ENV_WITH_UPDATES;\n  exports.IS_BARE_ENV_WITHOUT_UPDATES = IS_BARE_ENV_WITHOUT_UPDATES;\n\n  function getLocalAssets() {\n    var _NativeModulesProxy$E3, _NativeModulesProxy$E4;\n\n    return (_NativeModulesProxy$E3 = (_NativeModulesProxy$E4 = _core.NativeModulesProxy.ExpoUpdates) == null ? void 0 : _NativeModulesProxy$E4.localAssets) != null ? _NativeModulesProxy$E3 : {};\n  }\n\n  function getManifest() {\n    var _Constants$manifest;\n\n    return (_Constants$manifest = _expoConstants.default.manifest) != null ? _Constants$manifest : {};\n  }\n\n  var manifestBaseUrl = _expoConstants.default.experienceUrl ? (0, _AssetUris.getManifestBaseUrl)(_expoConstants.default.experienceUrl) : null;\n  exports.manifestBaseUrl = manifestBaseUrl;\n\n  function downloadAsync(uri, hash, type, name) {\n    return _regenerator.default.async(function downloadAsync$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!IS_MANAGED_ENV) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", _downloadAsyncManagedEnv(uri, hash, type, name));\n\n          case 2:\n            return _context.abrupt(\"return\", _downloadAsyncUnmanagedEnv(uri, hash, type));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function _downloadAsyncManagedEnv(uri, hash, type, name) {\n    var cacheFileId, localUri, _await$FileSystem$get, exists, md5, _await$FileSystem$dow;\n\n    return _regenerator.default.async(function _downloadAsyncManagedEnv$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            cacheFileId = hash || (0, _blueimpMd.default)(uri);\n            localUri = FileSystem.cacheDirectory + \"ExponentAsset-\" + cacheFileId + \".\" + type;\n            _context2.next = 4;\n            return _regenerator.default.awrap(FileSystem.getInfoAsync(localUri, {\n              md5: true\n            }));\n\n          case 4:\n            _await$FileSystem$get = _context2.sent;\n            exists = _await$FileSystem$get.exists;\n            md5 = _await$FileSystem$get.md5;\n\n            if (!(!exists || hash !== null && md5 !== hash)) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 10;\n            return _regenerator.default.awrap(FileSystem.downloadAsync(uri, localUri, {\n              md5: true\n            }));\n\n          case 10:\n            _await$FileSystem$dow = _context2.sent;\n            md5 = _await$FileSystem$dow.md5;\n\n            if (!(hash !== null && md5 !== hash)) {\n              _context2.next = 14;\n              break;\n            }\n\n            throw new Error(\"Downloaded file for asset '\" + name + \".\" + type + \"' \" + (\"Located at \" + uri + \" \") + \"failed MD5 integrity check\");\n\n          case 14:\n            return _context2.abrupt(\"return\", localUri);\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function _downloadAsyncUnmanagedEnv(uri, hash, type) {\n    var cacheFileId, localUri;\n    return _regenerator.default.async(function _downloadAsyncUnmanagedEnv$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (!uri.startsWith('file://')) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", uri);\n\n          case 2:\n            cacheFileId = hash || (0, _blueimpMd.default)(uri);\n            localUri = FileSystem.cacheDirectory + \"ExponentAsset-\" + cacheFileId + \".\" + type;\n            _context3.next = 6;\n            return _regenerator.default.awrap(FileSystem.downloadAsync(uri, localUri));\n\n          case 6:\n            return _context3.abrupt(\"return\", localUri);\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n});","lineCount":155,"map":[[16,0,1,0],[18,0,2,0],[20,0,3,0],[22,0,4,0],[24,0,5,0],[28,0,7,7],[28,6,7,13,"IS_MANAGED_ENV"],[28,20,7,27],[28,23,7,30],[28,24,7,31],[28,25,7,32,"Constants"],[28,48,7,42,"appOwnership"],[28,60,7,7],[30,0,11,7],[30,6,11,13,"IS_BARE_ENV_WITH_UPDATES"],[30,30,11,37],[30,33,11,40],[30,34,11,41,"IS_MANAGED_ENV"],[30,48,11,40],[30,52,12,4],[30,53,12,5],[30,80,12,6,"NativeModulesProxy"],[30,105,12,25,"ExpoUpdates"],[30,116,12,5],[30,137,12,6],[30,159,12,38,"isEnabled"],[30,168,12,5],[30,169,11,40],[30,173,15,4],[30,201,15,5,"NativeModulesProxy"],[30,226,15,24,"ExpoUpdates"],[30,237,15,4],[30,258,15,5],[30,281,15,37,"isUsingEmbeddedAssets"],[30,302,15,4],[30,303,11,7],[32,0,16,7],[32,6,16,13,"IS_ENV_WITH_UPDATES_ENABLED"],[32,33,16,40],[32,36,16,43,"IS_MANAGED_ENV"],[32,50,16,57],[32,54,16,61,"IS_BARE_ENV_WITH_UPDATES"],[32,78,16,7],[34,0,18,7],[34,6,18,13,"IS_BARE_ENV_WITHOUT_UPDATES"],[34,33,18,40],[34,36,18,43],[34,37,18,44,"IS_MANAGED_ENV"],[34,51,18,43],[34,55,18,62],[34,56,18,63,"IS_BARE_ENV_WITH_UPDATES"],[34,80,18,7],[37,0,21,7],[37,11,21,16,"getLocalAssets"],[37,25,21,7],[37,28,21,33],[38,0,21,33],[40,0,22,4],[40,63,22,11,"NativeModulesProxy"],[40,88,22,30,"ExpoUpdates"],[40,99,22,4],[40,120,22,11],[40,143,22,43,"localAssets"],[40,154,22,4],[40,191,22,58],[40,193,22,4],[41,0,23,1],[43,0,24,7],[43,11,24,16,"getManifest"],[43,22,24,7],[43,25,24,30],[44,0,24,30],[46,0,25,4],[46,34,25,11,"Constants"],[46,57,25,21,"manifest"],[46,65,25,4],[46,99,25,33],[46,101,25,4],[47,0,26,1],[49,0,28,7],[49,6,28,13,"manifestBaseUrl"],[49,21,28,28],[49,24,28,31,"Constants"],[49,47,28,41,"experienceUrl"],[49,60,28,31],[49,63,29,6],[49,98,29,25,"Constants"],[49,121,29,35,"experienceUrl"],[49,134,29,6],[49,135,28,31],[49,138,30,6],[49,142,28,7],[52,0,32,7],[52,11,32,22,"downloadAsync"],[52,24,32,7],[52,25,32,36,"uri"],[52,28,32,7],[52,30,32,41,"hash"],[52,34,32,7],[52,36,32,47,"type"],[52,40,32,7],[52,42,32,53,"name"],[52,46,32,7],[53,0,32,7],[54,0,32,7],[55,0,32,7],[56,0,32,7],[57,0,32,7],[57,17,33,8,"IS_MANAGED_ENV"],[57,31,32,7],[58,0,32,7],[59,0,32,7],[60,0,32,7],[62,0,32,7],[62,45,34,15,"_downloadAsyncManagedEnv"],[62,69,34,39],[62,70,34,40,"uri"],[62,73,34,39],[62,75,34,45,"hash"],[62,79,34,39],[62,81,34,51,"type"],[62,85,34,39],[62,87,34,57,"name"],[62,91,34,39],[62,92,32,7],[64,0,32,7],[65,0,32,7],[65,45,36,11,"_downloadAsyncUnmanagedEnv"],[65,71,36,37],[65,72,36,38,"uri"],[65,75,36,37],[65,77,36,43,"hash"],[65,81,36,37],[65,83,36,49,"type"],[65,87,36,37],[65,88,32,7],[67,0,32,7],[68,0,32,7],[69,0,32,7],[70,0,32,7],[71,0,32,7],[72,0,32,7],[73,0,32,7],[75,0,42,0],[75,11,42,15,"_downloadAsyncManagedEnv"],[75,35,42,0],[75,36,42,40,"uri"],[75,39,42,0],[75,41,42,45,"hash"],[75,45,42,0],[75,47,42,51,"type"],[75,51,42,0],[75,53,42,57,"name"],[75,57,42,0],[76,0,42,0],[78,0,42,0],[79,0,42,0],[80,0,42,0],[81,0,42,0],[82,0,43,10,"cacheFileId"],[82,12,43,10,"cacheFileId"],[82,23,42,0],[82,26,43,24,"hash"],[82,30,43,28],[82,34,43,32],[82,58,43,43,"uri"],[82,61,43,32],[82,62,42,0],[83,0,44,10,"localUri"],[83,12,44,10,"localUri"],[83,20,42,0],[83,23,44,24,"FileSystem"],[83,33,44,34],[83,34,44,35,"cacheDirectory"],[83,48,42,0],[83,70,44,66,"cacheFileId"],[83,81,42,0],[83,90,44,81,"type"],[83,94,42,0],[84,0,42,0],[85,0,42,0],[85,46,45,32,"FileSystem"],[85,56,45,42],[85,57,45,43,"getInfoAsync"],[85,69,45,32],[85,70,45,56,"localUri"],[85,78,45,32],[85,80,45,66],[86,0,46,8,"md5"],[86,14,46,8,"md5"],[86,17,46,11],[86,19,46,13],[87,0,45,66],[87,13,45,32],[87,14,42,0],[89,0,42,0],[90,0,42,0],[91,0,45,10,"exists"],[91,12,45,10,"exists"],[91,18,42,0],[91,43,45,10,"exists"],[91,49,42,0],[92,0,45,18,"md5"],[92,12,45,18,"md5"],[92,15,42,0],[92,40,45,18,"md5"],[92,43,42,0],[94,0,42,0],[94,18,48,8],[94,19,48,9,"exists"],[94,25,48,8],[94,29,48,20,"hash"],[94,33,48,24],[94,38,48,29],[94,42,48,20],[94,46,48,37,"md5"],[94,49,48,40],[94,54,48,45,"hash"],[94,58,42,0],[95,0,42,0],[96,0,42,0],[97,0,42,0],[99,0,42,0],[100,0,42,0],[100,46,49,25,"FileSystem"],[100,56,49,35],[100,57,49,36,"downloadAsync"],[100,70,49,25],[100,71,49,50,"uri"],[100,74,49,25],[100,76,49,55,"localUri"],[100,84,49,25],[100,86,49,65],[101,0,50,12,"md5"],[101,14,50,12,"md5"],[101,17,50,15],[101,19,50,17],[102,0,49,65],[102,13,49,25],[102,14,42,0],[104,0,42,0],[105,0,42,0],[106,0,49,11,"md5"],[106,12,49,11,"md5"],[106,15,42,0],[106,40,49,11,"md5"],[106,43,42,0],[108,0,42,0],[108,18,52,12,"hash"],[108,22,52,16],[108,27,52,21],[108,31,52,12],[108,35,52,29,"md5"],[108,38,52,32],[108,43,52,37,"hash"],[108,47,42,0],[109,0,42,0],[110,0,42,0],[111,0,42,0],[113,0,42,0],[113,18,53,18],[113,22,53,22,"Error"],[113,27,53,18],[113,28,53,28],[113,60,53,58,"name"],[113,64,53,28],[113,73,53,66,"type"],[113,77,53,28],[113,104,54,30,"uri"],[113,107,53,28],[113,145,53,18],[113,146,42,0],[115,0,42,0],[116,0,42,0],[116,46,58,11,"localUri"],[116,54,42,0],[118,0,42,0],[119,0,42,0],[120,0,42,0],[121,0,42,0],[122,0,42,0],[123,0,42,0],[124,0,42,0],[126,0,65,0],[126,11,65,15,"_downloadAsyncUnmanagedEnv"],[126,37,65,0],[126,38,65,42,"uri"],[126,41,65,0],[126,43,65,47,"hash"],[126,47,65,0],[126,49,65,53,"type"],[126,53,65,0],[127,0,65,0],[128,0,65,0],[129,0,65,0],[130,0,65,0],[131,0,65,0],[132,0,65,0],[132,17,68,8,"uri"],[132,20,68,11],[132,21,68,12,"startsWith"],[132,31,68,8],[132,32,68,23],[132,41,68,8],[132,42,65,0],[133,0,65,0],[134,0,65,0],[135,0,65,0],[137,0,65,0],[137,46,69,15,"uri"],[137,49,65,0],[139,0,65,0],[140,0,71,10,"cacheFileId"],[140,12,71,10,"cacheFileId"],[140,23,65,0],[140,26,71,24,"hash"],[140,30,71,28],[140,34,71,32],[140,58,71,43,"uri"],[140,61,71,32],[140,62,65,0],[141,0,72,10,"localUri"],[141,12,72,10,"localUri"],[141,20,65,0],[141,23,72,24,"FileSystem"],[141,33,72,34],[141,34,72,35,"cacheDirectory"],[141,48,65,0],[141,70,72,66,"cacheFileId"],[141,81,65,0],[141,90,72,81,"type"],[141,94,65,0],[142,0,65,0],[143,0,65,0],[143,46,75,10,"FileSystem"],[143,56,75,20],[143,57,75,21,"downloadAsync"],[143,70,75,10],[143,71,75,35,"uri"],[143,74,75,10],[143,76,75,40,"localUri"],[143,84,75,10],[143,85,65,0],[145,0,65,0],[146,0,65,0],[146,46,76,11,"localUri"],[146,54,65,0],[148,0,65,0],[149,0,65,0],[150,0,65,0],[151,0,65,0],[152,0,65,0],[153,0,65,0],[154,0,65,0]],"functionMap":{"names":["<global>","getLocalAssets","getManifest","downloadAsync","_downloadAsyncManagedEnv","_downloadAsyncUnmanagedEnv"],"mappings":"AAA;OCoB;CDE;OEC;CFE;OGM;CHK;AIK;CJiB;AKM;CLY"}},"type":"js/module"}]}